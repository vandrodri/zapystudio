{
  "version": 3,
  "sources": ["../../../../../Vanderlei/Desktop/instavibrant-studio/netlify/functions/generate-logo.js"],
  "sourceRoot": "C:/Users/VANDER~1/AppData/Local/Temp/tmp-17052-7fL5TISZdJf0",
  "sourcesContent": ["exports.handler = async (event) => {\r\n  const headers = {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Headers': 'Content-Type',\r\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n    'Content-Type': 'application/json'\r\n  };\r\n\r\n  if (event.httpMethod === 'OPTIONS') {\r\n    return { statusCode: 204, headers, body: '' };\r\n  }\r\n\r\n  if (event.httpMethod !== 'POST') {\r\n    return {\r\n      statusCode: 405,\r\n      headers,\r\n      body: JSON.stringify({ error: 'Method Not Allowed' })\r\n    };\r\n  }\r\n\r\n  try {\r\n    console.log('=== IN\u00CDCIO DA GERA\u00C7\u00C3O (POLLINATIONS.AI) ===');\r\n    \r\n    const { prompt } = JSON.parse(event.body || '{}');\r\n\r\n    if (!prompt) {\r\n      return {\r\n        statusCode: 400,\r\n        headers,\r\n        body: JSON.stringify({ error: 'Prompt \u00E9 obrigat\u00F3rio' })\r\n      };\r\n    }\r\n\r\n    console.log('Prompt original:', prompt);\r\n\r\n    // Prompt MUITO otimizado para logos (n\u00E3o fotos!)\r\n    const logoPrompt = `simple flat logo icon of ${prompt}, vector graphic, 2D, single solid color on white background, minimalist symbol, geometric shapes only, no text, no 3D, no shading, no gradients, no photography, clean design, iconic`;\r\n    \r\n    const negativePrompt = '&negative=realistic,photo,photograph,3D,shading,gradient,text,words,letters,detailed,complex,busy,cluttered,messy';\r\n\r\n    console.log('Prompt otimizado:', logoPrompt);\r\n\r\n    // Pollinations.ai - 100% GR\u00C1TIS, sem API key, sem limites!\r\n    const encodedPrompt = encodeURIComponent(logoPrompt);\r\n    const imageUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}${negativePrompt}&width=1024&height=1024&nologo=true&model=flux&seed=${Date.now()}`;\r\n\r\n    console.log('URL da imagem:', imageUrl);\r\n    console.log('Baixando imagem...');\r\n\r\n    // Baixar a imagem\r\n    const imageResponse = await fetch(imageUrl);\r\n\r\n    if (!imageResponse.ok) {\r\n      console.error('Erro ao baixar imagem:', imageResponse.status);\r\n      return {\r\n        statusCode: imageResponse.status,\r\n        headers,\r\n        body: JSON.stringify({ \r\n          error: 'Erro ao gerar imagem'\r\n        })\r\n      };\r\n    }\r\n\r\n    const imageBuffer = await imageResponse.arrayBuffer();\r\n    console.log('Imagem recebida, tamanho:', imageBuffer.byteLength, 'bytes');\r\n\r\n    if (imageBuffer.byteLength === 0) {\r\n      return {\r\n        statusCode: 500,\r\n        headers,\r\n        body: JSON.stringify({ error: 'Imagem vazia' })\r\n      };\r\n    }\r\n\r\n    // Converter para base64\r\n    const base64Image = Buffer.from(imageBuffer).toString('base64');\r\n    console.log('Imagem convertida para base64');\r\n    console.log('=== FIM DA GERA\u00C7\u00C3O ===');\r\n\r\n    return {\r\n      statusCode: 200,\r\n      headers,\r\n      body: JSON.stringify({\r\n        image: `data:image/jpeg;base64,${base64Image}`\r\n      })\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('=== ERRO GERAL ===');\r\n    console.error('Mensagem:', error.message);\r\n    console.error('Stack:', error.stack);\r\n    \r\n    return {\r\n      statusCode: 500,\r\n      headers,\r\n      body: JSON.stringify({ \r\n        error: `Erro interno: ${error.message}`\r\n      })\r\n    };\r\n  }\r\n};"],
  "mappings": ";AAAA,QAAQ,UAAU,OAAO,UAAU;AACjC,QAAM,UAAU;AAAA,IACd,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,IAChC,gBAAgB;AAAA,EAClB;AAEA,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO,EAAE,YAAY,KAAK,SAAS,MAAM,GAAG;AAAA,EAC9C;AAEA,MAAI,MAAM,eAAe,QAAQ;AAC/B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,qBAAqB,CAAC;AAAA,IACtD;AAAA,EACF;AAEA,MAAI;AACF,YAAQ,IAAI,sDAA6C;AAEzD,UAAM,EAAE,OAAO,IAAI,KAAK,MAAM,MAAM,QAAQ,IAAI;AAEhD,QAAI,CAAC,QAAQ;AACX,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,OAAO,6BAAuB,CAAC;AAAA,MACxD;AAAA,IACF;AAEA,YAAQ,IAAI,oBAAoB,MAAM;AAGtC,UAAM,aAAa,4BAA4B,MAAM;AAErD,UAAM,iBAAiB;AAEvB,YAAQ,IAAI,qBAAqB,UAAU;AAG3C,UAAM,gBAAgB,mBAAmB,UAAU;AACnD,UAAM,WAAW,wCAAwC,aAAa,GAAG,cAAc,uDAAuD,KAAK,IAAI,CAAC;AAExJ,YAAQ,IAAI,kBAAkB,QAAQ;AACtC,YAAQ,IAAI,oBAAoB;AAGhC,UAAM,gBAAgB,MAAM,MAAM,QAAQ;AAE1C,QAAI,CAAC,cAAc,IAAI;AACrB,cAAQ,MAAM,0BAA0B,cAAc,MAAM;AAC5D,aAAO;AAAA,QACL,YAAY,cAAc;AAAA,QAC1B;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB,OAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,cAAc,YAAY;AACpD,YAAQ,IAAI,6BAA6B,YAAY,YAAY,OAAO;AAExE,QAAI,YAAY,eAAe,GAAG;AAChC,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU,EAAE,OAAO,eAAe,CAAC;AAAA,MAChD;AAAA,IACF;AAGA,UAAM,cAAc,OAAO,KAAK,WAAW,EAAE,SAAS,QAAQ;AAC9D,YAAQ,IAAI,+BAA+B;AAC3C,YAAQ,IAAI,8BAAwB;AAEpC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,0BAA0B,WAAW;AAAA,MAC9C,CAAC;AAAA,IACH;AAAA,EAEF,SAAS,OAAO;AACd,YAAQ,MAAM,oBAAoB;AAClC,YAAQ,MAAM,aAAa,MAAM,OAAO;AACxC,YAAQ,MAAM,UAAU,MAAM,KAAK;AAEnC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,iBAAiB,MAAM,OAAO;AAAA,MACvC,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
